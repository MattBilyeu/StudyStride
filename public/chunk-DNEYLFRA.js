import{a as ee,b as z,c as te}from"./chunk-DY5BX7MD.js";import{$ as B,B as m,C as x,D as o,E as r,F as l,G as P,H as u,I as F,J as f,K as d,L as v,P as E,T as $,U as I,V as G,W as Y,ba as J,da as q,ea as M,fa as O,ha as K,ia as A,ja as D,ka as T,l as k,la as j,ma as N,o as g,oa as Q,p as w,pa as W,qa as X,r as _,ra as V,s as h,sa as Z,u as R,w as s,x as c,y as L}from"./chunk-KXD63ADB.js";var ne=(()=>{let t=class t{constructor(e){this.dataService=e}ngOnInit(){this.dataService.loggedIn||this.dataService.routerService.next(["admin"])}};t.\u0275fac=function(i){return new(i||t)(c(O))},t.\u0275cmp=g({type:t,selectors:[["app-admin"]],decls:1,vars:0,template:function(i,a){i&1&&l(0,"router-outlet")},dependencies:[J]});let n=t;return n})();function pe(n,t){if(n&1&&(o(0,"option",23),d(1),r()),n&2){let p=t.$implicit;m("value",p._id),s(1),v(p.name)}}var oe=(()=>{let t=class t{constructor(e,i){this.dataService=e,this.http=i,this.editorConfig={base_url:"/tinymce",suffix:".min",plugins:"lists link table",toolbar:"numlist bullist link table"},this.allAdmins=[]}ngOnInit(){this.http.getAllAdmins().subscribe(e=>{this.allAdmins=e.allAdmins})}createAdmin(e){this.http.createAdmin(e.value.name,e.value.email,e.value.password).subscribe(i=>{this.dataService.message.next(i.message),e.value.name="",e.value.email="",e.value.password=""})}deleteAdmin(e){this.http.deleteAdmin(e.value.adminId).subscribe(i=>{this.dataService.message.next(i.message)})}emailAllUsers(e){confirm("Are you sure you want to email all users?")&&this.http.emailAllUsers(e.value.subject,e.value.message).subscribe(a=>{this.dataService.message.next(a.message),e.reset()})}};t.\u0275fac=function(i){return new(i||t)(c(O),c(M))},t.\u0275cmp=g({type:t,selectors:[["app-admin-dash"]],decls:35,vars:5,consts:[[1,"standardForm",3,"ngSubmit"],["c","ngForm"],[1,"heading"],["for","name",1,"one"],["type","text","name","name","ngModel","","required","",1,"two"],["for","email",1,"three"],["type","email","name","email","ngModel","","required","",1,"four"],["for","password",1,"five"],["type","password","name","password","ngModel","","required","",1,"six"],["type","submit",1,"seven",3,"disabled"],[1,"secondary-background",3,"ngSubmit"],["d","ngForm"],[1,"flex-column"],["name","adminId","id","adminId","ngModel","","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"delete",3,"disabled"],[1,"emailForm",3,"ngSubmit"],["e","ngForm"],[1,"group"],["for","subject"],["type","text","name","subject","ngModel","","required",""],["id","editor","name","message","ngModel","","required","",3,"init"],["type","submit",3,"disabled"],[3,"value"]],template:function(i,a){if(i&1){let b=P();o(0,"form",0,1),u("ngSubmit",function(){_(b);let C=f(1);return h(a.createAdmin(C))}),o(2,"h1",2),d(3,"Create Admin"),r(),o(4,"label",3),d(5,"Name:"),r(),l(6,"input",4),o(7,"label",5),d(8,"Email:"),r(),l(9,"input",6),o(10,"label",7),d(11,"Password:"),r(),l(12,"input",8),o(13,"button",9),d(14,"Submit"),r()(),o(15,"form",10,11),u("ngSubmit",function(){_(b);let C=f(16);return h(a.deleteAdmin(C))}),o(17,"div",12)(18,"h1"),d(19,"Delete Admin"),r(),o(20,"select",13),x(21,pe,2,2,"option",14),r(),o(22,"button",15),d(23,"Delete"),r()()(),o(24,"form",16,17),u("ngSubmit",function(){_(b);let C=f(25);return h(a.emailAllUsers(C))}),o(26,"h1"),d(27,"Email All Users"),r(),o(28,"div",18)(29,"label",19),d(30,"Subject:"),r(),l(31,"input",20),r(),l(32,"editor",21),o(33,"button",22),d(34,"Send"),r()()}if(i&2){let b=f(1),y=f(16),C=f(25);s(13),m("disabled",!b.valid),s(8),m("ngForOf",a.allAdmins),s(1),m("disabled",!y.valid),s(10),m("init",a.editorConfig),s(1),m("disabled",!C.valid)}},dependencies:[I,N,W,X,K,Q,A,D,V,j,T,z],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700;cursor:pointer}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}.standardForm[_ngcontent-%COMP%]{grid-template-rows:repeat(5,auto);grid-template-areas:"heading heading" "one two" "three four" "five six" "seven eight"}.standardForm[_ngcontent-%COMP%]   .six[_ngcontent-%COMP%]{grid-area:six}.standardForm[_ngcontent-%COMP%]   .seven[_ngcontent-%COMP%]{grid-area:seven}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;justify-content:center;margin:auto;width:fit-content}.emailForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.emailForm[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:auto}.emailForm[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.emailForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content}@media screen and (min-width: 800px){form.emailForm[_ngcontent-%COMP%]{margin:auto 1rem 1rem;justify-content:center}.emailForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:auto}}']});let n=t;return n})();function ge(n,t){if(n&1&&l(0,"editor",10),n&2){let p=F();m("init",p.editorConfig)}}var re=n=>({hidden:n});function ue(n,t){if(n&1&&(o(0,"button",11),d(1,"Email Sender"),r()),n&2){let p=F(),e=f(3);m("ngClass",E(2,re,!p.viewEditor))("disabled",!e.valid)}}var fe=n=>({"secondary-background":n}),ae=(()=>{let t=class t{constructor(e,i,a){this.dataService=e,this.domSanitizer=i,this.http=a,this.deleted=new L,this.viewEditor=!1,this.editorConfig={base_url:"/tinymce",suffix:".min",plugins:"lists link table",toolbar:"numlist bullist link table"}}ngOnInit(){this.feedback=this.dataService.feedbacks.filter(e=>e._id===this.feedbackId)[0],this.sanitizedHTML=this.domSanitizer.bypassSecurityTrustHtml(this.feedback.text)}emailSender(e){this.http.emailSender(e.value.message,this.feedback.userId).subscribe(i=>{this.dataService.message.next(i.message),e.value.message="",this.viewEditor=!1})}displayEditor(){this.viewEditor=!0}deleteFeedback(){this.http.deleteFeedback(this.feedback._id).subscribe(e=>{console.log("Delete feedback responsee reached."),this.dataService.message.next(e.message),this.deleted.emit(!0)})}};t.\u0275fac=function(i){return new(i||t)(c(O),c(B),c(M))},t.\u0275cmp=g({type:t,selectors:[["app-feedback-detail"]],inputs:{feedbackId:"feedbackId",index:"index"},outputs:{deleted:"deleted"},decls:12,vars:9,consts:[[1,"detailContainer"],[3,"ngClass"],[3,"ngSubmit"],["f","ngForm"],[1,"feedbackText",3,"innerHTML"],["name","message","ngModel","","required","",3,"init",4,"ngIf"],[1,"buttons"],["type","button",3,"ngClass","click"],["type","submit",3,"ngClass","disabled",4,"ngIf"],["type","button",1,"delete",3,"click"],["name","message","ngModel","","required","",3,"init"],["type","submit",3,"ngClass","disabled"]],template:function(i,a){if(i&1){let b=P();o(0,"div",0)(1,"div",1)(2,"form",2,3),u("ngSubmit",function(){_(b);let C=f(3);return h(a.emailSender(C))}),l(4,"div",4),x(5,ge,1,1,"editor",5),o(6,"div",6)(7,"button",7),u("click",function(){return a.displayEditor()}),d(8,"Open Editor"),r(),x(9,ue,2,4,"button",8),o(10,"button",9),u("click",function(){return a.deleteFeedback()}),d(11,"Delete"),r()()()()()}i&2&&(s(1),m("ngClass",E(5,fe,a.index%2===0)),s(3),m("innerHTML",a.sanitizedHTML,R),s(1),m("ngIf",a.viewEditor),s(2),m("ngClass",E(7,re,a.viewEditor)),s(2),m("ngIf",a.viewEditor))},dependencies:[$,G,N,A,D,V,j,T,z],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700;cursor:pointer}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}form[_ngcontent-%COMP%]{margin:1rem}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:1rem;margin:1rem auto}@media screen and (min-width: 800px){.detailContainer[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background);max-width:600px;border-radius:30px;margin:1rem;box-shadow:4px 4px 0 var(--primary-color)}}']});let n=t;return n})();function Ce(n,t){if(n&1){let p=P();o(0,"app-feedback-detail",2),u("deleted",function(){let a=_(p).$implicit,b=F();return h(b.deleteFeedback(a._id))}),r()}if(n&2){let p=t.$implicit,e=t.index;m("index",e)("feedbackId",p._id)}}var de=(()=>{let t=class t{constructor(e,i){this.dataService=e,this.http=i}ngOnInit(){this.initializeComponent()}initializeComponent(){this.http.getFeedback().subscribe(e=>{e.feedbacks&&(this.feedbacks=e.feedbacks,this.dataService.feedbacks=e.feedbacks)})}deleteFeedback(e){this.feedbacks=this.feedbacks.filter(i=>i._id!==e)}};t.\u0275fac=function(i){return new(i||t)(c(O),c(M))},t.\u0275cmp=g({type:t,selectors:[["app-admin-feedback"]],decls:2,vars:1,consts:[[1,"detailContainer"],[3,"index","feedbackId","deleted",4,"ngFor","ngForOf"],[3,"index","feedbackId","deleted"]],template:function(i,a){i&1&&(o(0,"div",0),x(1,Ce,1,2,"app-feedback-detail",1),r()),i&2&&(s(1),m("ngForOf",a.feedbacks))},dependencies:[I,ae],styles:[".detailContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}"]});let n=t;return n})();var se=(()=>{let t=class t{constructor(e){this.http=e}ngOnInit(){this.http.getStatsObject().subscribe(e=>{e.totalStudyTime=Math.round(+e.totalStudyTime*100)/100,this.appObject=e}),this.http.getActiveUserCount().subscribe(e=>{this.userCounts=e})}};t.\u0275fac=function(i){return new(i||t)(c(M))},t.\u0275cmp=g({type:t,selectors:[["app-app-stats"]],decls:23,vars:5,consts:[[1,"grid"],[1,"heading"],["for","timestamps"],["for","milestones"],["for","totalStudyTime"],["for","activeUsers"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"h1",1),d(2,"Application Stats"),r(),o(3,"label",2),d(4,"Total Timestamps:"),r(),o(5,"p"),d(6),r(),o(7,"label",3),d(8,"Milestones Created:"),r(),o(9,"p"),d(10),r(),o(11,"label",4),d(12,"Total Study Time (in hrs):"),r(),o(13,"p"),d(14),r(),o(15,"label",5),d(16,"Active Users:"),r(),o(17,"p"),d(18),r(),o(19,"label",5),d(20,"All Users:"),r(),o(21,"p"),d(22),r()()),i&2&&(s(6),v(a.appObject.totalTimeStamps),s(4),v(a.appObject.milestonesCreated),s(4),v(a.appObject.totalStudyTime),s(4),v(a.userCounts.activeUsers),s(4),v(a.userCounts.allUsers))},styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(auto,5);font-weight:700;margin:1rem;justify-content:center;gap:1rem;align-items:center}.heading[_ngcontent-%COMP%]{grid-column:span 2}label[_ngcontent-%COMP%]{text-align:right}"]});let n=t;return n})();var _e=[{path:"",component:ne,children:[{path:"",component:oe,pathMatch:"full"},{path:"admin-feedback",component:de},{path:"app-stats",component:se}]}],me=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=w({type:t}),t.\u0275inj=k({imports:[q.forChild(_e),q]});let n=t;return n})();var Ke=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=w({type:t}),t.\u0275inj=k({providers:[{provide:ee,useValue:"tinymce/tinymce.min.js"}],imports:[Y,me,Z,te]});let n=t;return n})();export{Ke as AdminModule};

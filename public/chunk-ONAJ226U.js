import{a as oe,b as re,c as ae}from"./chunk-I4E3JU7E.js";import{$ as ne,A as v,B as i,C as r,D as u,E as P,F as p,G as y,H as b,I as a,J as g,K as X,N as A,O as J,P as Z,Q as ee,R as B,S as I,T as U,U as te,ba as Q,ca as x,da as S,fa as j,ga as w,ha as F,ia as T,ja as k,k as W,ka as E,la as L,m as M,ma as V,n as q,na as H,oa as D,p as C,pa as ie,q as _,u as c,v as h,w as K,z as d}from"./chunk-VAXZXOKE.js";var se=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=M({type:o,selectors:[["app-user"]],decls:1,vars:0,template:function(e,n){e&1&&u(0,"router-outlet")},dependencies:[ne],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}']});let s=o;return s})();var Ce=["topic"];function _e(s,o){s&1&&(i(0,"p"),a(1,"Please create a topic in the topic-stats page in order to start a session."),r())}function Me(s,o){s&1&&(i(0,"p"),a(1,"Session running..."),r())}function Pe(s,o){if(s&1&&(i(0,"option",23),a(1),r()),s&2){let m=o.$implicit;d("value",m),c(1),g(m)}}function Oe(s,o){if(s&1&&(i(0,"select",20,21),v(2,Pe,2,2,"option",22),r()),s&2){let m=y();c(2),d("ngForOf",m.topics)}}var ce=s=>({hidden:s});function ve(s,o){if(s&1){let m=P();i(0,"button",11),p("click",function(){C(m);let e=y();return _(e.endSession())}),a(1,"Stop"),r()}if(s&2){let m=y();d("ngClass",A(1,ce,!m.sessionRunning))}}var le=(()=>{let o=class o{constructor(t,e){this.dataService=t,this.http=e,this.sessionRunning=!1,this.topics=[],this.pastProgress={last30HrsStudied:0,last30HrsPerWeek:0,last30Badges:0,allTimeHrsStudied:0,allTimeHrsPerWeek:0,allTimeBadgesEarned:0}}ngOnInit(){this.initializeComponent()}ngAfterViewInit(){this.topics.length!==0&&(this.topic.nativeElement.value=this.topics[0])}initializeComponent(){if(console.log(typeof this.dataService.user.createDate),this.user=this.dataService.user,this.user.activeSession&&this.handleSessionObj(this.user.activeSession),this.user.topics.length>0){this.topics=this.user.topics.map(n=>n.topic),this.pastProgress.allTimeHrsStudied=+this.user.totalTime,this.pastProgress.allTimeBadgesEarned=this.user.badges.length;let e=(new Date(this.user.createDate).getTime()-Date.now())/(1e3*60*60*24*7);this.pastProgress.allTimeHrsPerWeek=Number((+this.user.totalTime/e).toFixed(2))}}handleSessionObj(t){this.sessionTopic=t.topic,this.sessionRunning=!0;let n=new Date().getTime()-+t.start;if(n=Math.floor(n/(60*1e3)),n<60)this.sessionTimeStudied=`${n} mins`;else{let l,f;l=Math.floor(n/60),f=Math.floor(n%60),this.sessionTimeStudied=`${l} hrs ${f} mins`}this.intervalId=setInterval(()=>{let f=new Date().getTime()-t.start.getTime();if(f=Math.floor(f/(60*1e3)),f<60)this.sessionTimeStudied=`${f} mins`;else{let O,Y;O=Math.floor(f/60),Y=Math.floor(f%60),this.sessionTimeStudied=`${O} hrs ${Y} mins`}},60*1e3)}startSession(){if(this.topic.nativeElement.value!==""){let t=this.topic.nativeElement.value;this.http.startSession(t).subscribe(e=>{this.dataService.message.next(e.message),e.user&&(this.dataService.user=e.user,this.initializeComponent())})}else alert("Please select a topic.")}endSession(){if(!this.sessionRunning)return alert("No session is running.");this.http.endSession().subscribe(t=>{this.dataService.message.next(t.message),t.user&&(this.dataService.user=t.user,this.initializeComponent())})}loadLast30Progress(){for(let t=0;t<this.user.topics.length;t++){let e=this.user.topics[t];for(let n=0;n<e.timestamps.length;n++){let l=Date.now()-2592e6;e.timestamps[n].stamp.getTime()>l&&(this.pastProgress.last30HrsStudied=+this.pastProgress.last30HrsStudied+ +e.timestamps[n].duration)}}this.pastProgress.last30HrsStudied=Number((this.pastProgress.allTimeHrsStudied/60).toFixed(2)),this.pastProgress.last30HrsPerWeek=+this.pastProgress.last30HrsStudied/(30/7),this.pastProgress.last30Badges=Math.floor(this.pastProgress.last30HrsStudied/10)}ngOnDestroy(){this.sessionRunning&&(this.dataService.message.next("Ending session..."),this.endSession())}};o.\u0275fac=function(e){return new(e||o)(h(S),h(x))},o.\u0275cmp=M({type:o,selectors:[["app-session"]],viewQuery:function(e,n){if(e&1&&Z(Ce,5),e&2){let l;J(l=ee())&&(n.topic=l.first)}},decls:49,vars:16,consts:[[1,"secondary-background"],[1,"sessionContainer"],[1,"one"],[1,"two"],[1,"three"],[1,"four"],[1,"five"],[1,"six"],[4,"ngIf"],[1,"sessionControls"],["name","topic",4,"ngIf"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],[1,"pastProgressContainer"],[1,"seven"],[1,"eight"],[1,"nine"],[1,"ten"],[1,"eleven"],[1,"twelve"],["name","topic"],["topic",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"h1"),a(2,"This Session"),r(),i(3,"div",1)(4,"h3",2),a(5,"Time Studied"),r(),i(6,"h3",3),a(7,"Hours to Next Badge"),r(),i(8,"h3",4),a(9,"Percent to Badge"),r(),i(10,"h2",5),a(11),r(),i(12,"h2",6),a(13),r(),i(14,"h2",7),a(15),r()(),v(16,_e,2,0,"p",8)(17,Me,2,0,"p",8),i(18,"div",9),v(19,Oe,3,1,"select",10),i(20,"button",11),p("click",function(){return n.startSession()}),a(21,"Start"),r(),v(22,ve,2,3,"button",12),r()(),i(23,"h1"),a(24,"Past Performance"),r(),i(25,"div",13),u(26,"h3",2),i(27,"h3",3),a(28,"Hours Studied"),r(),i(29,"h3",4),a(30,"Hours per Week"),r(),i(31,"h3",5),a(32,"Badges Earned"),r(),i(33,"h2",6),a(34,"Last 30 Days"),r(),i(35,"h2",7),a(36),r(),i(37,"h2",14),a(38),r(),i(39,"h2",15),a(40),r(),i(41,"h2",16),a(42,"All Time"),r(),i(43,"h2",17),a(44),r(),i(45,"h2",18),a(46),r(),i(47,"h2",19),a(48),r()()),e&2&&(c(11),g(n.sessionTimeStudied),c(2),g(n.hoursToNextBadge),c(2),X("",n.percentToBadge,"%"),c(1),d("ngIf",n.topics.length===0),c(1),d("ngIf",n.sessionRunning),c(2),d("ngIf",n.topics.length!==0),c(1),d("ngClass",A(14,ce,n.sessionRunning)),c(2),d("ngIf",n.topics.length!==0),c(14),g(n.pastProgress.last30HrsStudied),c(2),g(n.pastProgress.last30HrsPerWeek),c(2),g(n.pastProgress.last30Badges),c(4),g(n.pastProgress.allTimeHrsStudied),c(2),g(n.pastProgress.allTimeHrsPerWeek),c(2),g(n.pastProgress.allTimeBadgesEarned))},dependencies:[B,I,U,V,H],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}.sessionContainer[_ngcontent-%COMP%], .pastProgressContainer[_ngcontent-%COMP%]{padding:.5rem;margin-top:2rem;justify-content:center;text-align:center}h1[_ngcontent-%COMP%]{text-align:center;text-decoration:underline}.sessionContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-template-areas:"one four" "two five" "three six";gap:1rem}.sessionContainer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.pastProgressContainer[_ngcontent-%COMP%]{padding:1rem;display:grid;grid-template-areas:"one five nine" "two six ten" "three seven eleven" "four eight twelve";gap:1rem}.one[_ngcontent-%COMP%]{grid-area:one}.two[_ngcontent-%COMP%]{grid-area:two}.three[_ngcontent-%COMP%]{grid-area:three}.four[_ngcontent-%COMP%]{grid-area:four}.five[_ngcontent-%COMP%]{grid-area:five}.six[_ngcontent-%COMP%]{grid-area:six}.seven[_ngcontent-%COMP%]{grid-area:seven}.eight[_ngcontent-%COMP%]{grid-area:eight}.nine[_ngcontent-%COMP%]{grid-area:nine}.ten[_ngcontent-%COMP%]{grid-area:ten}.eleven[_ngcontent-%COMP%]{grid-area:eleven}.twelve[_ngcontent-%COMP%]{grid-area:twelve}h3[_ngcontent-%COMP%]{border-bottom:thin solid var(--primary-color)}h3[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{display:inline;width:fit-content;margin:0 auto;align-self:end}.sessionControls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-evenly;margin:1rem auto;max-width:600px}.sessionControls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .sessionControls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700}']});let s=o;return s})();function xe(s,o){if(s&1){let m=P();i(0,"li")(1,"span"),a(2),r(),i(3,"button",15),p("click",function(){let n=C(m).index,l=y();return _(l.completeMilestone(n))}),a(4,"\u2713"),r(),i(5,"button",16),p("click",function(){let n=C(m).index,l=y();return _(l.deleteActiveMilestone(n))}),a(6,"X"),r()()}if(s&2){let m=o.$implicit;c(2),g(m.name)}}function Se(s,o){if(s&1){let m=P();i(0,"li")(1,"span"),a(2),r(),i(3,"button",16),p("click",function(){let n=C(m).index,l=y();return _(l.deleteActiveMilestone(n))}),a(4,"X"),r()()}if(s&2){let m=o.$implicit;c(2),g(m.name)}}var me=(()=>{let o=class o{constructor(t,e){this.dataService=t,this.http=e,this.activeMilestones=[],this.completedMilestones=[]}ngOnInit(){this.initializeComponent()}initializeComponent(){let t=this.dataService.user.milestones;for(let e=0;e<t.length;e++)t[e].completed?this.completedMilestones.push(t[e]):this.activeMilestones.push(t[e])}createMilestone(t){this.activeMilestones.push({name:t.value.title,completed:!1})}completeMilestone(t){this.completedMilestones.push(this.activeMilestones[t]),this.activeMilestones.splice(t,1)}deleteActiveMilestone(t){this.activeMilestones.splice(t,1)}deleteCompletedMilestone(t){this.activeMilestones.splice(t,1)}saveMilestones(){let t=this.activeMilestones.concat(this.completedMilestones);this.http.updateMilestones(t).subscribe(e=>{this.dataService.message.next(e.message),e.user&&(this.dataService.user=e.user,this.initializeComponent())})}};o.\u0275fac=function(e){return new(e||o)(h(S),h(x))},o.\u0275cmp=M({type:o,selectors:[["app-milestones"]],decls:35,vars:2,consts:[[1,"componentContainer"],[1,"milestoneSection"],[1,"milestoneContainer"],[1,"smallText"],[1,"centered"],[4,"ngFor","ngForOf"],[1,"completedMilestoneContainer"],[1,"createMilestoneContainer"],[3,"ngSubmit"],["f","ngForm"],["for","title"],["type","text","name","title","ngModel","","required",""],["type","submit"],[1,"buttonContainer"],[3,"click"],[1,"complete",3,"click"],[1,"delete",3,"click"]],template:function(e,n){if(e&1){let l=P();i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Milestones"),r(),i(5,"ol")(6,"li",3)(7,"span"),a(8,"Milestone"),r(),i(9,"span",4),a(10,"Complete"),r(),i(11,"span",4),a(12,"Delete"),r()(),v(13,xe,7,1,"li",5),r()(),i(14,"div",6)(15,"h1"),a(16,"Completed Milestones"),r(),i(17,"ol")(18,"li",3)(19,"span"),a(20,"Milestone"),r(),i(21,"span",4),a(22,"Delete"),r()(),v(23,Se,5,1,"li",5),r()()(),i(24,"div",7)(25,"form",8,9),p("ngSubmit",function(){C(l);let O=b(26);return _(n.createMilestone(O))}),i(27,"label",10),a(28,"Title:"),r(),u(29,"input",11),i(30,"button",12),a(31,"Submit"),r()()(),i(32,"div",13)(33,"button",14),p("click",function(){return n.saveMilestones()}),a(34,"Save Changes"),r()()()}e&2&&(c(13),d("ngForOf",n.activeMilestones),c(10),d("ngForOf",n.completedMilestones))},dependencies:[I,E,j,w,F,D,k,T],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}.componentContainer[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--secondary-background)}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{text-align:center;text-decoration:underline}.milestoneSection[_ngcontent-%COMP%], .buttonContainer[_ngcontent-%COMP%]{padding:.5rem;display:flex;flex-direction:column;max-width:800px;margin:auto}.milestoneContainer[_ngcontent-%COMP%], .completedMilestoneContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;max-width:600px;margin:auto}.milestoneContainer[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .completedMilestoneContainer[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{padding-left:0;justify-content:center;margin:auto}.milestoneContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .completedMilestoneContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 3.5rem 3rem;gap:1rem;margin-bottom:1rem;align-items:center}.centered[_ngcontent-%COMP%]{text-align:center}.completedMilestoneContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{grid-template-columns:auto 3rem}.milestoneContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .completedMilestoneContainer[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-color);background-color:var(--secondary-background);border:none;box-shadow:4px 4px 0 var(--box-shadow);justify-self:center;margin:auto;font-weight:700;min-width:3rem}.createMilestoneContainer[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin:auto;width:fit-content;align-items:center}@media screen and (min-width: 800px){.milestoneSection[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}}']});let s=o;return s})();var de=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=M({type:o,selectors:[["app-user-dash"]],decls:2,vars:0,template:function(e,n){e&1&&u(0,"app-session")(1,"app-milestones")},dependencies:[le,me]});let s=o;return s})();var ge=(()=>{let o=class o{constructor(t,e){this.dataService=t,this.http=e,this.editorConfig={base_url:"/tinymce",suffix:".min",plugins:"lists link table",toolbar:"numlist bullist link table",menubar:""},this.dangerousKeywords=["import","script","onload","onclick","onerror","script","iframe","object","embed","eval","document.write","setTimeout","javascript:","alert(","confirm(","SELECT","DELETE","UPDATE","DROP","../","file://"]}submitFeedback(t){let e=t.value.feedback;for(let n=0;n<this.dangerousKeywords.length;n++)e.lowerCase().includes(this.dangerousKeywords[n].toLowerCase())?this.handleFeedback():(this.http.createFeedback(e).subscribe(),this.handleFeedback());t.value.feedback=""}handleFeedback(){this.dataService.message.next("Thank you for your feedback"),this.dataService.routerService.next(["user-dash"])}};o.\u0275fac=function(e){return new(e||o)(h(S),h(x))},o.\u0275cmp=M({type:o,selectors:[["app-user-feedback"]],decls:9,vars:1,consts:[[1,"feedback",3,"ngSubmit"],["f","ngForm"],["id","editor","name","feedback","ngModel","","required","",3,"init"],["type","submit"],[1,"smallText"]],template:function(e,n){if(e&1){let l=P();i(0,"form",0,1),p("ngSubmit",function(){C(l);let O=b(1);return _(n.submitFeedback(O))}),i(2,"h1"),a(3,"Thanks for your Feedback!"),r(),u(4,"editor",2),i(5,"button",3),a(6,"Submit"),r(),i(7,"p",4),a(8,"Your contact email is automatically submitted with your feedback."),r()()}e&2&&(c(4),d("init",n.editorConfig))},dependencies:[E,w,F,D,k,T,re],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;text-align:center}button[_ngcontent-%COMP%]{line-height:2rem;width:fit-content;margin:1rem auto 0}@media screen and (min-width: 800px){form[_ngcontent-%COMP%]{max-width:90%;margin:auto}}"]});let s=o;return s})();function we(s,o){if(s&1&&(i(0,"option",19),a(1),r()),s&2){let m=o.$implicit;c(1),g(m)}}var Fe=s=>({"secondary-background":s}),pe=(()=>{let o=class o{constructor(t,e){this.dataService=t,this.http=e,this.updated=new K,this.topics=[],this.pastProgress={last30HrsStudied:0,last30HrsPerWeek:0,allTimeHrsStudied:0,allTimeHrsPerWeek:0}}ngOnInit(){this.targetObj=this.dataService.user.topics.filter(n=>n.topic===this.topic)[0],this.dataService.user.topics.forEach(n=>this.topics.push(n.topic));for(let n=0;n<this.targetObj.timestamps.length;n++){this.pastProgress.allTimeHrsStudied+=+this.targetObj.timestamps[n].duration;let l=Date.now()-1e3*60*60*24*30;this.targetObj.timestamps[n].stamp.getTime()<l&&(this.pastProgress.last30HrsStudied+=+this.targetObj.timestamps[n].duration)}this.pastProgress.last30HrsPerWeek=this.pastProgress.last30HrsStudied/(30/7);let t=Date.now();for(let n=0;n<this.targetObj.timestamps.length;n++)this.targetObj.timestamps[n].stamp.getTime()<t&&(t=this.targetObj.timestamps[n].stamp.getTime());let e=(Date.now()-t)/(1e3*60*60*24*7);this.pastProgress.allTimeHrsPerWeek=this.pastProgress.allTimeHrsStudied/e}deleteTopic(t){if(t.value.mergeTopic===this.targetObj.topic)return alert("You cannot marge a topic with itself.");let e;t.value.mergeTopic==="None"?e=confirm(`Are you sure you want to delete ${this.targetObj.topic} and all its timestamps without merging them?  You will lose the recorded time.`):e=confirm(`Are you sure you want to delete ${this.targetObj.topic} and merge its timestamps with ${t.value.mergeTopic} and then delete ${this.targetObj.topic}?  This action is irreversable.`),e&&this.http.deleteTopic(this.targetObj.topic,t.value.mergeTopic).subscribe(n=>{this.dataService.message.next(n.message),n.user&&(this.dataService.user=n.user,this.updated.emit(!0))})}};o.\u0275fac=function(e){return new(e||o)(h(S),h(x))},o.\u0275cmp=M({type:o,selectors:[["app-topic-stats-detail"]],inputs:{index:"index",topic:"topic"},outputs:{updated:"updated"},decls:32,vars:10,consts:[[1,"detailContainer",3,"ngClass"],[1,"pastProgressContainer"],[1,"one"],[1,"two"],[1,"three"],[1,"four"],[1,"five"],[1,"six"],[1,"seven"],[1,"eight"],[1,"nine"],[1,"deleteContainer",3,"ngSubmit"],["d","ngForm"],[1,"merge"],["for","mergeTopic"],["name","mergeTopic","ngModel","","required",""],["value","None"],["value","Topic 2",4,"ngFor","ngForOf"],["type","submit",1,"delete",3,"disabled"],["value","Topic 2"]],template:function(e,n){if(e&1){let l=P();i(0,"div",0)(1,"h1"),a(2),r(),i(3,"div",1),u(4,"h3",2),i(5,"h3",3),a(6,"Hours Studied"),r(),i(7,"h3",4),a(8,"Hours per Week"),r(),i(9,"h2",5),a(10,"Last Month"),r(),i(11,"h2",6),a(12),r(),i(13,"h2",7),a(14),r(),i(15,"h2",8),a(16,"All Time"),r(),i(17,"h2",9),a(18),r(),i(19,"h2",10),a(20),r()(),i(21,"form",11,12),p("ngSubmit",function(){C(l);let O=b(22);return _(n.deleteTopic(O))}),i(23,"div",13)(24,"label",14),a(25,"Merge Timestamps?"),r(),i(26,"select",15)(27,"option",16),a(28,"None"),r(),v(29,we,2,1,"option",17),r()(),i(30,"button",18),a(31,"Delete Topic"),r()()()}if(e&2){let l=b(22);d("ngClass",A(8,Fe,n.index%2!==0)),c(2),g(n.targetObj.topic),c(10),g(n.pastProgress.last30HrsStudied),c(2),g(n.pastProgress.last30HrsPerWeek),c(4),g(n.pastProgress.allTimeHrsStudied),c(2),g(n.pastProgress.allTimeHrsPerWeek),c(9),d("ngForOf",n.topics),c(1),d("disabled",!l.valid)}},dependencies:[B,I,E,V,H,L,w,F,D,k,T],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}.detailContainer[_ngcontent-%COMP%]{padding:1rem}h1[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;margin-bottom:0}.pastProgressContainer[_ngcontent-%COMP%]{padding:1rem;display:grid;grid-template-rows:repeat(3,auto)!important;grid-template-columns:1.5fr 1fr 1fr!important;grid-template-areas:"one four seven" "two five eight" "three six nine";gap:1rem;margin-top:1rem;justify-content:center;text-align:center;max-width:600px;margin:auto auto 1rem}.one[_ngcontent-%COMP%]{grid-area:one}.two[_ngcontent-%COMP%]{grid-area:two}.three[_ngcontent-%COMP%]{grid-area:three}.four[_ngcontent-%COMP%]{grid-area:four}.five[_ngcontent-%COMP%]{grid-area:five}.six[_ngcontent-%COMP%]{grid-area:six}.seven[_ngcontent-%COMP%]{grid-area:seven}.eight[_ngcontent-%COMP%]{grid-area:eight}.nine[_ngcontent-%COMP%]{grid-area:nine}h3[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{display:inline;width:fit-content;margin:0 auto;align-self:end}form.deleteContainer[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;align-items:center}.merge[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}@media screen and (min-width: 768px){.pastProgressContainer[_ngcontent-%COMP%]{padding:.5rem;margin-top:2rem;display:grid;grid-template-columns:1.5fr repeat(3,1fr);grid-template-rows:2rem .5rem;gap:1rem;justify-content:center;text-align:center}.detailContainer[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background);max-width:600px;border-radius:30px;margin:1rem;box-shadow:4px 4px 0 var(--primary-color)}}']});let s=o;return s})();function ke(s,o){if(s&1){let m=P();i(0,"div",6)(1,"app-topic-stats-detail",7),p("updated",function(){C(m);let e=y();return _(e.initializeComponent())}),r()()}}var ue=(()=>{let o=class o{constructor(t,e){this.dataService=t,this.http=e,this.topicObjs=[]}ngOnInit(){this.initializeComponent()}initializeComponent(){this.topicObjs=this.dataService.user.topics}createTopic(t){this.http.createTopic(t.value.newTopic).subscribe(e=>{this.dataService.message.next(e.message),e.user&&(this.dataService.user=e.user,this.initializeComponent())})}};o.\u0275fac=function(e){return new(e||o)(h(S),h(x))},o.\u0275cmp=M({type:o,selectors:[["app-topic-stats"]],decls:8,vars:1,consts:[[1,"addTopic",3,"ngSubmit"],["f","ngForm"],["for","topic"],["placeholder","topic name","name","newTopic","type","text","ngModel","","required",""],["type","submit"],["class","statsContainer",4,"ngIf"],[1,"statsContainer"],[3,"updated"]],template:function(e,n){if(e&1){let l=P();i(0,"form",0,1),p("ngSubmit",function(){C(l);let O=b(1);return _(n.createTopic(O))}),i(2,"label",2),a(3,"Add a Topic: "),r(),u(4,"input",3),i(5,"button",4),a(6,"Create Topic"),r()(),v(7,ke,2,0,"div",5)}e&2&&(c(7),d("ngIf",n.topicObjs.length>0))},dependencies:[U,E,j,w,F,D,k,T,pe],styles:['[_ngcontent-%COMP%]:root{--primary-color: #00203FFF;--primary-background: white;--secondary-background: #ADEFD1FF;--box-shadow: #171717 }html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{box-sizing:border-box;background-color:var(--primary-background);color:var(--primary-color);margin:0;font-family:sans-serif}.hidden[_ngcontent-%COMP%]{display:none!important}.secondary-background[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background)}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}.smallText[_ngcontent-%COMP%]{font-size:small}button[_ngcontent-%COMP%]{padding:.5rem;color:var(--primary-background);background-color:var(--primary-color);border:none;min-width:100px;font-weight:700}.complete[_ngcontent-%COMP%]{background-color:var(--secondary-background)}.delete[_ngcontent-%COMP%]{background-color:red;color:#fff}.loginForm[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]{max-width:600px;display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);gap:1rem;justify-content:center;margin:1rem auto;grid-template-areas:"heading heading" "one two" "three four" "five five"}.loginForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{grid-area:heading;text-align:center;text-decoration:underline}.loginForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .one[_ngcontent-%COMP%]{grid-area:one}.loginForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .two[_ngcontent-%COMP%]{grid-area:two}.loginForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .three[_ngcontent-%COMP%]{grid-area:three}.loginForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .four[_ngcontent-%COMP%]{grid-area:four}.loginForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%], .standardForm[_ngcontent-%COMP%]   .five[_ngcontent-%COMP%]{grid-area:five}button[_ngcontent-%COMP%]:disabled{background-color:#a9a9a9!important}.addTopic[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin:1rem auto;justify-content:center;color:var(--primary-color);align-items:center}.statsContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}']});let s=o;return s})();function Ee(s,o){if(s&1&&(i(0,"option",22),a(1),r()),s&2){let m=o.$implicit;d("value",m),c(1),g(m)}}var fe=(()=>{let o=class o{constructor(t,e){this.dataService=t,this.http=e,this.receivesEmailsMess="Turn OFF emails:",this.topics=[]}ngOnInit(){this.userEmail=this.dataService.user.email,this.dataService.user.receivesEmails||(this.receivesEmailsMess="Turn ON emails:"),this.dataService.user.topics.forEach(t=>this.topics.push(t.topic))}updateEmail(t){let e=t.value.email.toLowerCase(),n=t.value.confirmEmail.toLowerCase();if(e!==n)return alert("Email and confirm email must match.");this.http.updateEmail(this.userEmail,e,t.value.password).subscribe(l=>{this.dataService.message.next(l.message),l.user&&(this.dataService.user=l.user,this.userEmail=l.user.email)})}seedTime(t){this.http.seedTime(t.value.seedTime,t.value.seedTopic).subscribe(e=>{this.dataService.message.next(e.message),e.user&&(this.dataService.user=e.user)})}toggleReceiveEmails(){this.http.toggleReceiveEmails().subscribe(t=>{this.dataService.message.next(t.message),t.user&&(this.dataService.user=t.user,this.receivesEmailsMess==="Turn OFF emails:"?this.receivesEmailsMess="Turn ON emails:":this.receivesEmailsMess="Turn OFF emails:")})}deleteUser(){prompt(`Type "delete ${this.userEmail}" to delete your account.`)==="delete "+this.userEmail&&this.http.deleteUser(this.dataService.user._id).subscribe(e=>{this.dataService.message.next(e.message),e.message==="User deleted."&&(this.dataService.loggedIn=!1,this.dataService.user=void 0,this.dataService.role.next(""),localStorage.removeItem("loginData"),this.dataService.routerService.next([""]))})}};o.\u0275fac=function(e){return new(e||o)(h(S),h(x))},o.\u0275cmp=M({type:o,selectors:[["app-settings"]],decls:40,vars:2,consts:[[1,"secondary-background"],[1,"componentContainer"],[3,"ngSubmit"],["e","ngForm"],[1,"one"],["for","email",1,"two"],["name","email","type","email",1,"three"],["for","confirmEmail",1,"four"],["name","confirmEmail","type","email",1,"five"],["for","password"],["type","password","name","password","ngModel","","required",""],["type","submit",1,"six"],["s","ngForm"],["for","Topic",1,"two"],["name","seedTopic","ngModel","","required","",1,"three"],[3,"value",4,"ngFor","ngForOf"],["name","seedTime","for","time",1,"four"],["name","seedTime","type","number",1,"five"],[1,"toggle"],["for","toggleReceiveEmails"],[3,"click"],[1,"delete",3,"click"],[3,"value"]],template:function(e,n){if(e&1){let l=P();i(0,"div",0)(1,"div",1)(2,"h1"),a(3,"User Settings"),r(),i(4,"form",2,3),p("ngSubmit",function(){C(l);let O=b(5);return _(n.updateEmail(O))}),i(6,"h2",4),a(7,"Update Email"),r(),i(8,"label",5),a(9,"New Email:"),r(),u(10,"input",6),i(11,"label",7),a(12,"Confirm Email:"),r(),u(13,"input",8),i(14,"label",9),a(15,"Password:"),r(),u(16,"input",10),i(17,"button",11),a(18,"Submit"),r()(),i(19,"form",2,12),p("ngSubmit",function(){C(l);let O=b(20);return _(n.seedTime(O))}),i(21,"h1",4),a(22,"Seed Study Time"),r(),i(23,"label",13),a(24,"Topic:"),r(),i(25,"select",14),v(26,Ee,2,2,"option",15),r(),i(27,"label",16),a(28,"Add Time (in mins):"),r(),u(29,"input",17),i(30,"button",11),a(31,"Seed Time"),r()(),i(32,"div",18)(33,"label",19),a(34),r(),i(35,"button",20),p("click",function(){return n.toggleReceiveEmails()}),a(36,"Toggle"),r()(),i(37,"div")(38,"button",21),p("click",function(){return n.deleteUser()}),a(39,"Delete Account"),r()()()()}e&2&&(c(26),d("ngForOf",n.topics),c(8),g(n.receivesEmailsMess))},dependencies:[I,E,V,H,j,L,w,F,D,k,T],styles:['.componentContainer[_ngcontent-%COMP%]{max-width:600px;margin:auto;min-height:100vh}h1[_ngcontent-%COMP%]{text-decoration:underline;text-align:center}form[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], div[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(4,auto);grid-template-areas:"one one" "two three" "four five" "six six";max-width:90%;margin:auto auto 1rem;gap:1rem}.one[_ngcontent-%COMP%]{grid-area:one}.two[_ngcontent-%COMP%]{grid-area:two}.three[_ngcontent-%COMP%]{grid-area:three}.four[_ngcontent-%COMP%]{grid-area:four}.five[_ngcontent-%COMP%]{grid-area:five}.six[_ngcontent-%COMP%]{grid-area:six;width:fit-content;margin:auto}.toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;align-items:center;margin:1rem auto}']});let s=o;return s})();var De=[{path:"",component:se,children:[{path:"",component:de},{path:"feedback",component:ge},{path:"topic-stats",component:ue},{path:"settings",component:fe}]}],he=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=q({type:o}),o.\u0275inj=W({imports:[Q.forChild(De),Q]});let s=o;return s})();var Ct=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=q({type:o}),o.\u0275inj=W({providers:[{provide:oe,useValue:"tinymce/tinymce.min.js"}],imports:[te,he,ie,ae]});let s=o;return s})();export{Ct as UserModule};

import{a as Z,b as q,c as ee}from"./chunk-I4E3JU7E.js";import{$ as B,A as x,B as r,C as a,D as c,E as M,F as u,G as O,H as f,I as o,J as S,N as A,R as L,S as I,T as G,U as $,Z as Y,ba as H,ca as _,da as k,fa as J,ga as D,ha as T,ia as j,ja as P,k as w,ka as N,la as K,m as p,ma as Q,n as E,na as W,oa as V,p as v,pa as X,q as C,s as z,u as m,v as l,w as R,z as d}from"./chunk-VAXZXOKE.js";var te=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=p({type:e,selectors:[["app-admin"]],decls:1,vars:0,template:function(i,s){i&1&&c(0,"router-outlet")},dependencies:[B]});let n=e;return n})();function pe(n,e){if(n&1&&(r(0,"option",23),o(1),a()),n&2){let h=e.$implicit;d("value",h._id),m(1),S(h.name)}}var re=(()=>{let e=class e{constructor(t,i){this.dataService=t,this.http=i,this.editorConfig={base_url:"/tinymce",suffix:".min",plugins:"lists link table",toolbar:"numlist bullist link table"},this.allAdmins=[]}ngOnInit(){this.http.getAllAdmins().subscribe(t=>{this.allAdmins=t.allAdmins})}createAdmin(t){this.http.createAdmin(t.value.name,t.value.email,t.value.password).subscribe(i=>{this.dataService.message.next(i.message),t.value.name="",t.value.email="",t.value.password=""})}deleteAdmin(t){this.http.deleteAdmin(t.value.adminId).subscribe(i=>{this.dataService.message.next(i.message)})}emailAllUsers(t){confirm("Are you sure you want to email all users?")&&this.http.emailAllUsers(t.value.subject,t.value.text).subscribe(s=>{this.dataService.message.next(s.message),t.value.subject="",t.value.text=""})}};e.\u0275fac=function(i){return new(i||e)(l(k),l(_))},e.\u0275cmp=p({type:e,selectors:[["app-admin-dash"]],decls:35,vars:5,consts:[[1,"standardForm",3,"ngSubmit"],["c","ngForm"],[1,"heading"],["for","name",1,"one"],["type","text","name","name","ngModel","","required","",1,"two"],["for","email",1,"three"],["type","email","name","email","ngModel","","required","",1,"four"],["for","password",1,"five"],["type","password","name","password","ngModel","","required","",1,"six"],["type","submit",1,"seven",3,"disabled"],[1,"secondary-background",3,"ngSubmit"],["d","ngForm"],[1,"flex-column"],["name","adminId","id","adminId","ngModel","","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"delete",3,"disabled"],[1,"emailForm",3,"ngSubmit"],["e","ngForm"],[1,"group"],["for","subject"],["type","text","name","subject","ngModel","","required",""],["id","editor","name","message","ngModel","","required","",3,"init"],["type","submit",3,"disabled"],[3,"value"]],template:function(i,s){if(i&1){let g=M();r(0,"form",0,1),u("ngSubmit",function(){v(g);let b=f(1);return C(s.createAdmin(b))}),r(2,"h1",2),o(3,"Create Admin"),a(),r(4,"label",3),o(5,"Name:"),a(),c(6,"input",4),r(7,"label",5),o(8,"Email:"),a(),c(9,"input",6),r(10,"label",7),o(11,"Password:"),a(),c(12,"input",8),r(13,"button",9),o(14,"Submit"),a()(),r(15,"form",10,11),u("ngSubmit",function(){v(g);let b=f(16);return C(s.deleteAdmin(b))}),r(17,"div",12)(18,"h1"),o(19,"Delete Admin"),a(),r(20,"select",13),x(21,pe,2,2,"option",14),a(),r(22,"button",15),o(23,"Delete"),a()()(),r(24,"form",16,17),u("ngSubmit",function(){v(g);let b=f(25);return C(s.emailAllUsers(b))}),r(26,"h1"),o(27,"Email All Users"),a(),r(28,"div",18)(29,"label",19),o(30,"Subject:"),a(),c(31,"input",20),a(),c(32,"editor",21),r(33,"button",22),o(34,"Send"),a()()}if(i&2){let g=f(1),y=f(16),b=f(25);m(13),d("disabled",!g.valid),m(8),d("ngForOf",s.allAdmins),m(1),d("disabled",!y.valid),m(10),d("init",s.editorConfig),m(1),d("disabled",!b.valid)}},dependencies:[I,N,Q,W,J,K,D,T,V,P,j,q],styles:['.standardForm[_ngcontent-%COMP%]{grid-template-rows:repeat(5,auto);grid-template-areas:"heading heading" "one two" "three four" "five six" "seven eight"}.standardForm[_ngcontent-%COMP%]   .six[_ngcontent-%COMP%]{grid-area:six}.standardForm[_ngcontent-%COMP%]   .seven[_ngcontent-%COMP%]{grid-area:seven}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;justify-content:center;margin:auto;width:fit-content}.emailForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.emailForm[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:auto}.emailForm[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.emailForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content}@media screen and (min-width: 800px){form.emailForm[_ngcontent-%COMP%]{margin:auto 1rem 1rem;justify-content:center}.emailForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:auto}}']});let n=e;return n})();function ue(n,e){if(n&1&&c(0,"editor",10),n&2){let h=O();d("init",h.editorConfig)}}var fe=n=>({"secondary-background":n}),ae=n=>({hidden:n}),oe=(()=>{let e=class e{constructor(t,i,s){this.dataService=t,this.domSanitizer=i,this.http=s,this.deleted=new R,this.viewEditor=!1,this.editorConfig={base_url:"/tinymce",suffix:".min",plugins:"lists link table",toolbar:"numlist bullist link table"}}ngOnInit(){this.feedback=this.dataService.feedbacks.filter(t=>t._id===this.feedbackId)[0],this.sanitizedHTML=this.domSanitizer.bypassSecurityTrustHtml(this.feedback.text)}emailSender(t){this.http.emailSender(t.value.message,this.feedback.userId).subscribe(i=>{this.dataService.message.next(i.message),t.value.message="",this.viewEditor=!1})}displayEditor(){this.viewEditor=!0}deleteFeedback(){this.http.deleteFeedback(this.feedback._id).subscribe(t=>{this.dataService.message.next(t.message),this.deleted.emit(!0)})}};e.\u0275fac=function(i){return new(i||e)(l(k),l(Y),l(_))},e.\u0275cmp=p({type:e,selectors:[["app-feedback-detail"]],inputs:{feedbackId:"feedbackId",index:"index"},outputs:{deleted:"deleted"},decls:13,vars:12,consts:[[1,"detailContainer"],[3,"ngClass"],[3,"ngSubmit"],["f","ngForm"],[1,"feedbackText",3,"innerHTML"],["name","message","ngModel","","required","",3,"init",4,"ngIf"],[1,"buttons"],["type","button",3,"ngClass","click"],["type","submit",3,"ngClass","disabled"],["type","button",1,"delete",3,"click"],["name","message","ngModel","","required","",3,"init"]],template:function(i,s){if(i&1){let g=M();r(0,"div",0)(1,"div",1)(2,"form",2,3),u("ngSubmit",function(){v(g);let b=f(3);return C(s.emailSender(b))}),c(4,"div",4),x(5,ue,1,1,"editor",5),r(6,"div",6)(7,"button",7),u("click",function(){return s.displayEditor()}),o(8,"Open Editor"),a(),r(9,"button",8),o(10,"Email Sender"),a(),r(11,"button",9),u("click",function(){return s.deleteFeedback()}),o(12,"Delete"),a()()()()()}if(i&2){let g=f(3);m(1),d("ngClass",A(6,fe,s.index%2===0)),m(3),d("innerHTML",s.sanitizedHTML,z),m(1),d("ngIf",s.viewEditor),m(2),d("ngClass",A(8,ae,s.viewEditor)),m(2),d("ngClass",A(10,ae,!s.viewEditor))("disabled",!g.valid)}},dependencies:[L,G,N,D,T,V,P,j,q],styles:["form[_ngcontent-%COMP%]{margin:1rem}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:1rem auto}@media screen and (min-width: 800px){.detailContainer[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--secondary-background);max-width:600px;border-radius:30px;margin:1rem;box-shadow:4px 4px 0 var(--primary-color)}}"]});let n=e;return n})();function be(n,e){if(n&1){let h=M();r(0,"app-feedback-detail",2),u("deleted",function(){v(h);let i=O();return C(i.initializeComponent)}),a()}if(n&2){let h=e.$implicit,t=e.index;d("index",t)("feedbackId",h._id)}}var se=(()=>{let e=class e{constructor(t,i){this.dataService=t,this.http=i}ngOnInit(){this.initializeComponent()}initializeComponent(){this.http.getFeedback().subscribe(t=>{t.feedbacks&&(this.feedbacks=t.feedbacks,this.dataService.feedbacks=t.feedbacks)})}};e.\u0275fac=function(i){return new(i||e)(l(k),l(_))},e.\u0275cmp=p({type:e,selectors:[["app-admin-feedback"]],decls:2,vars:1,consts:[[1,"detailContainer"],[3,"index","feedbackId","deleted",4,"ngFor","ngForOf"],[3,"index","feedbackId","deleted"]],template:function(i,s){i&1&&(r(0,"div",0),x(1,be,1,2,"app-feedback-detail",1),a()),i&2&&(m(1),d("ngForOf",s.feedbacks))},dependencies:[I,oe],styles:[".detailContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}"]});let n=e;return n})();var me=(()=>{let e=class e{constructor(t){this.http=t}ngOnInit(){this.http.getStatsObject().subscribe(t=>{this.appObject=t}),this.http.getActiveUserCount().subscribe(t=>{this.userCounts=t})}};e.\u0275fac=function(i){return new(i||e)(l(_))},e.\u0275cmp=p({type:e,selectors:[["app-app-stats"]],decls:23,vars:5,consts:[[1,"grid"],[1,"heading"],["for","timestamps"],["for","milestones"],["for","totalStudyTime"],["for","activeUsers"]],template:function(i,s){i&1&&(r(0,"div",0)(1,"h1",1),o(2,"Application Stats"),a(),r(3,"label",2),o(4,"Total Timestamps:"),a(),r(5,"p"),o(6),a(),r(7,"label",3),o(8,"Milestones Created:"),a(),r(9,"p"),o(10),a(),r(11,"label",4),o(12,"Total Study Time (in hrs):"),a(),r(13,"p"),o(14),a(),r(15,"label",5),o(16,"Active Users:"),a(),r(17,"p"),o(18),a(),r(19,"label",5),o(20,"All Users:"),a(),r(21,"p"),o(22),a()()),i&2&&(m(6),S(s.appObject.totalTimeStamps),m(4),S(s.appObject.milestonesCreated),m(4),S(s.appObject.totalStudyTime),m(4),S(s.userCounts.activeUsers),m(4),S(s.userCounts.allUsers))},styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;grid-template-rows:repeat(auto,5);font-weight:700;margin:1rem;justify-content:center;gap:1rem;align-items:center}.heading[_ngcontent-%COMP%]{grid-column:span 2}label[_ngcontent-%COMP%]{text-align:right}"]});let n=e;return n})();var he=[{path:"",component:te,children:[{path:"",component:re,pathMatch:"full"},{path:"admin-feedback",component:se},{path:"app-stats",component:me}]}],de=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=E({type:e}),e.\u0275inj=w({imports:[H.forChild(he),H]});let n=e;return n})();var Je=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=E({type:e}),e.\u0275inj=w({providers:[{provide:Z,useValue:"tinymce/tinymce.min.js"}],imports:[$,de,X,ee]});let n=e;return n})();export{Je as AdminModule};
